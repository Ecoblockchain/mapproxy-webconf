%def leftblock():
  <div ng-controller="MapproxyGridListCtrl">
    <h3>Grids</h3>
     <ul class="vertical-list">
      <hr>
       <div class="{{isSelected(grid)}}" ng-repeat="grid in mapproxy_grids | orderBy:'name'"
        ng-click="editGrid(grid)">
         <li>{{grid.name}}
         <i class="icon-remove"
           ask-dialog
           dialog-title="Confirm!"
           dialog-text='Really remove grid "{{grid.name}}"?'
          callback="removeGrid(grid)">
         </i>
        </li>
        <hr>
      </div>
    </ul>
    <button class="btn btn-small pull-right" ng-click="newGrid()">New grid</button>
  </div>
%end

%def middleblock():
<div>
  <form name="grid_form" ng-controller="MapproxyGridFormCtrl" novalidate>
    <h3>{{formTitle}}</h3>
    <!-- name -->
      <div labeled="input_label" name-for="grid_form.name" text="Name">
          <input required type="text" ng-model="grid.name" id="grid_form.name" />
      </div>
  <!-- SRS -->
      <div labeled="input_label" name-for="grid_form.srs" text="SRS">
           <select ng-model="grid.srs" id="grid_form.srs">
              <option value="EPSG:3857">EPSG:3857</option>
              <option value="EPSG:4326">EPSG:4326</option>
              <option value="EPSG:900913">EPSG:900913</option>
          </select>
      </div>
  <!-- BBox -->
      <div labeled="input_label" name-for="grid_form.bbox_0" text="BBox">
          <input type="number" ng-model="grid.bbox[0]" class="input-mini" id="grid_form.bbox_0" />
          <input type="number" ng-model="grid.bbox[1]" class="input-mini" id="grid_form.bbox_1" />
          <input type="number" ng-model="grid.bbox[2]" class="input-mini" id="grid_form.bbox_2" />
          <input type="number" ng-model="grid.bbox[3]" class="input-mini" id="grid_form.bbox_3" />
      </div>
  <!-- BBox SRS -->
      <div labeled="input_label" name-for="grid_form.bbox_srs" text="BBox SRS">
          <select ng-model="grid.bbox_srs" id="grid_form.bbox_srs">
              <option value="EPSG:3857">EPSG:3857</option>
              <option value="EPSG:4326">EPSG:4326</option>
              <option value="EPSG:900913">EPSG:900913</option>
          </select>
      </div>
  <!-- origin -->
      <div labeled="input_label" name-for="grid_form.origin" text="Origin">
          <select ng-model="grid.origin" id="grid_form.origin">
              <option value="sw">SW / LL</option>
              <option value="nw">NW / UL</option>
          </select>
      </div>
      <button class="btn btn-small" ng-click="addGrid($event)" ng-disabled="!grid_form.$valid">Save</button>
      <button class="btn btn-small" ng-click="resetForm($event)">Reset</button>
      <span class="text-success" id="grid_save_ok" ng-show="false">
        <i class="icon-ok"></i>
        <strong>Saved successfully</strong>
       </span>
  </form>
</div>
%end

%def rightblock():
&nbsp;
%end

%rebase base_config leftblock=leftblock, middleblock=middleblock, rightblock=rightblock, project=get('project'), active='grids'