%def leftblock():
    <div ng-controller="MapproxyGlobalsChooserCtrl" ng-show="!globals._manual">
        <h3>{{'Globals'|i18n}}</h3>
        <ul class="vertical-list">
            <hr>
            <div class="{{getClasses(global)}}"
                ng-repeat="(global, data) in filtered(globals)"
                ng-click="show(global)">
                <li>{{global|i18n}}</li>
                <hr>
            </div>
        </ul>
    </div>
%end

%def middleblock():
<script type="text/ng-template" id="cache.html">
    <h3>{{'cache'|i18n}}</h3>
    <div labeled="input_label" name-for="globals_form.cache_meta_size" text="{{'Meta size'|i18n}}">
        <input type="number" min=0 ng-model="globals.cache.meta_size[0]" class="input-mini" id="globals_form.cache_meta_size" />
        <input type="number" min=0 ng-model="globals.cache.meta_size[1]" class="input-mini" id="globals_form.cache_meta_size_1" />
    </div>
    <div labeled="input_label" name-for="globals_form.cache_meta_buffer" text="{{'Meta buffer'|i18n}}">
        <input type="number" min=1 ng-model="globals.cache.meta_buffer" id="globals_form.cache_meta_buffer">
    </div>
</script>
<script type="text/ng-template" id="image.html">
    <h3>{{'image'|i18n}}</h3>
    <div labeled="input_label" name-for="globals_form.image_resampling_method" text="{{'Resampling method'|i18n}}">
        <select ng-model="globals.images.resampling_method" id="globals_form.image_resampling_method">
            <option value="nearest">Nearest</option>
            <option value="bilinear">Bilinear</option>
            <option value="bicubic">Bicubic</option>
        </select>
    </div>
    <div labeled="checkbox_label" name-for="globals_form.image_paletted" text="{{'Paletted'|i18n}}">
        <input type="checkbox" ng-model="globals.image.paletted" id="globals_form.image_paletted">
    </div>
</script>
<div>
    <h3>{{'Globals'|i18n}}</h3>
    <div ng-controller="MapproxyGlobalsFormCtrl">
        <form name="globals_form" novalidate>
            <div ng-include src="template"></div>

            <button class="btn btn-small" ng-click="save($event)" ng-disabled="!globals_form.$valid" id="globals_form_save">{{'Save'|i18n}}</button>
            <span class="text-success save_ok" ng-show="false">
                <i class="icon-ok"></i>
                <strong>{{'Saved successfully'|i18n}}</strong>
            </span>
            <span class="text-error" id="globals_service_error" ng-show="false">
                <i class="icon-thumbs-down"></i>
                <strong>{{'An error occured'|i18n}}</strong>
                <p>{{errorMsg}}</p>
            </span>
        </form>
    </div>
</div>
%end

%def rightblock():
  &nbsp;
%end

%rebase base_config leftblock=leftblock, rightblock=rightblock, middleblock=middleblock, project=get('project'), active='globals'